---
title: Битва сніжками
level: 4
author: 'Geir Arne Hjelle'
translator: Anatolii
language: ua
---


# Вступ {.intro}

У цьому завданні ми створимо гру, метою якої є прогнати лиходіїв, кидаючи в них сніжки. 
По дорозі ми навчимося, як з часом робити гру складнішою, роблячи персонажів, 
проти яких ми граємо, швидшими та складнішими для прогону.

![Зображення готової гри](snoballkrig.png)

# Крок 1: Метальник сніжок {.activity}

*Починаємо зі створення відповідного фону, а також метальника сніжок, яким ми будемо керувати.*

## Контрольний список {.check}

- [ ] Почніть новий проєкт. Видаліть спрайт кота.

- [ ] Давайте зробимо фон. Для цієї гри нам потрібен досить простий фон із зимовою тематикою. 
Ми можемо намалювати його самостійно:

 Виберіть ![Намалювати фон](../bilder/tegn-ny.png) , щоб намалювати нове тло. Переконайтеся, що ви використовуєте векторну графіку, і 
намалюйте великий квадрат, який покриє весь фон. Потім виберіть синій колір. Клацніть на відерце з фарбою, щоб зафарбувати квадрат.

Тепер виберіть білий колір і створіть трохи меншу рамку, щоб зафарбувати нижню частину фону.

  ![зображення можливого фону для гри](bakgrunn.png)

  Назвіть тло `Гра`.

- [ ] Розмістіть на сцені наступний невеликий скрипт:

  ```blocks
  коли @greenFlag натиснуто
  оповістити [Старт v]
  ```

  Можливо, ви бачили цей трюк раніше. Це полегшує нам задачу, коли ми повертаємося пізніше і додаємо меню «Пуск» і тому подібне.

- [ ] Наступний крок - знайти відповідного персонажа, яким ми зможемо керувати і кидатися сніжками.
     Ми використали сніговика `Фантазії/Snowman`, але ви можете використовувати будь-якого персонажа, який вам подобається.
	 Назвіть персонажа `Герой`.

- [ ] Створіть нову змінну, `швидкість`{.blockdata}, яка застосовується тільки до цієї фігури, і створіть цей скрипт: 
 
  ```blocks
  коли @greenFlag натиснуто
  задати розмір 75
  стиль обертання [зліва-направо v]
  надати [швидкість v] значення [5]
  ```

 На зелений прапорець ми помістили налаштування, які будуть застосовуватися до `Героя` протягом всієї гри. 
 Не соромтеся змінювати розмір і швидкість під час тестування гри, щоб знайти налаштування, які вам подобаються.

- [ ] Тепер ми можемо створити основний цикл  для `Героя`. Спочатку створіть цикл, який починається коли отримує повідомлення `Старт`:

  ```blocks
  коли я отримую [Старт v]
  перемістити в x: (0) y: (-75)
  завжди
  slutt
  ```

- [ ] Усередині циклу нам потрібні два блоки `якщо`{.blockcontrol}, які переміщують приріст `швидкості`{.blockdata} `Героя` вправо або
      вліво при натисканні клавіш зі стрілками вправо і вліво. Зробіть їх самостійно.


- [ ] Наостанок створіть блок `якщо`{.blockcontrol}, в якому ви відправляєте повідомлення про `викид` при натисканні клавіші пробілу.

## Тестування проєкту {.flag}

__Натисніть на зелений прапорець__

- [ ] Чи рухається ваш персонаж по сцені, коли ви натискаєте клавіші зі стрілками вправо і вліво? Поки що нічого не повинно відбуватися,
      коли ви натискаєте пробіл, оскільки жоден персонаж не реагує на повідомлення про `викид`.

- [ ] Можливо, вам доведеться трохи змінити позицію по осі `Y`, з якої починається ваш персонаж, щоб він виглядав природно на тлі.

- [ ] Якщо у вас є персонаж з декількома образами, ви також можете використовувати блок `наступний образ`{.blocklooks},  
      щоб анімувати персонажа так, щоб він рухався більш природно.

# Крок 2: Багато сніжок {.activity}

*Без сніжок не буває битви сніжками. Давайте зробимо їх багато! З великою кількістю снігу!*

## Контрольний список {.check}

- [ ] Намалюйте нову фігуру. За допомогою інструмента «Коло» намалюйте маленьке біле коло, а потім розфарбуйте його так, 
      щоб воно стало повністю білим. Натиснітт на  ![Обрати центр](../bilder/velg_senterpunkt.png) і переконайтеся,
  що центральна точка розташована посередині сніжної кулі. Назвіть фігуру `Сніжок`.
 
- [ ] Так само, як і у випадку з `Героєм`, ми спочатку встановлюємо деякі налаштування за замовчуванням для сніжки. 
      Створіть змінну `швидкість`{.blockdata}, яка застосовується лише до цієї фігури:

  ```blocks
  коли @greenFlag натиснуто
  сховати
  задати розмір (40)
  надати [швидкість v] значення [10]
  ```

- [ ] Ми використовуємо `сховати`{.blocklooks}, тому що хочемо зробити клони (копії) цієї сніжки, яку ми викидаємо. 
      Це дуже корисний трюк у Скретч. Сам код, який відповідає на повідомлення про `кидок`, дуже простий.

  ```blocks
  коли я отримую [кидок v]
  створити клон з [мене v]
  ```

- [ ] Поведінка кожної сніжки потім запрограмована в один блок `коли я починаю як клон`{.blockcontrol}.
 
  ```blocks
  коли я починаю як клон
  перейти до [Герой v]
  повернути в напрямку ([напрям v] з [Герой v])
  показати
  повторити до <торкається [межа v]>
      перемістити на (швидкість) кроків
  slutt
  вилучити цей клон
  ```

## Тестування проєкту {.flag}

__Натисніть на зелений прапор.__

- [ ] Що відбувається, коли ви натискаєте пробіл? Чи кидаються сніжки в правильному напрямку?

- [ ] Можливо, не схоже, що `Герой` кидає сніжки руками? Ви можете додати кілька блоків `руху`{.blockmotion} безпосередньо перед тим,
      як `показати`{.blocklooks} сніжок, щоб це виглядало краще.

- [ ] Як невеликий виклик, ви також можете спробувати додати невеликий ефект гравітації до сніжки, злегка змінюючи `y` під час польоту сніжки.

- [ ] Є одна маленька проблема - наш `Герой` *занадто* добре кидається сніжками! Кожного разу, коли ми натискаємо пробіл, 
      вилітає багато сніжок. Ми можемо вирішити цю проблему, просто дочекавшись, поки пробіл буде відпущено, перш ніж кидати сніжку. Додайте команду

  ```blocks
  чекати поки <не <клавішу [пробіл v] натиснуто?>>
  ```
  на спрайті `Героя` до повідомлення `кидка`.

# Крок 3: Погані хлопці {.activity}

*Тепер давайте подивимося, як ми можемо зробити поганих хлопців,
 які намагаються нас зловити. Давайте проженемо їх сніжками.*

## Контрольний список {.check}

- [ ] Створіть нового персонажа. Ми використовували `Люди/Dee`, що ходить, але ви можете використовувати будь-якого персонажа,
     який вам подобається. Може, веселіше пограти в сніжки з монстром? Назвіть персонажа `Моторошний`.

- [ ] Точно так само, як і у випадку зі сніжками, ми хочемо зробити клони `Моторошного`. 
     Але спочатку вирішимо, як він має виглядати. Знову ж таки, створюємо змінну `швидкість`{.blockdata}, 
	 яка застосовується тільки до цієї фігури. Далі,

  ```blocks
  коли @greenFlag натиснуто
  сховати
  перемістити на x: (0) y: (-70)
  стиль обертання [зліва-направо]
  задати розмір (30)
  надати [швидкість v] значення [3]
  ```

- [ ] Ми хочемо, щоб клони з'являлися з дещо випадковими інтервалами і з обох боків екрану.

  ```blocks
  коли я отримую [старт v]
  завжди
      якщо <(випадкове від (1) до (0)) = [0]> то
          повернути в напрямку (90 v)
          задати x (-250)
      інакше
          повернути в напрямку (-90 v)
          задати x (250)
      slutt
      створити клон з [мене v]
      чекати (випадкове від (2) до (4)) секунд
  slutt
  ```

- [ ] Так само, як і у випадку зі сніжками, нам також потрібно визначити поведінку кожного окремого `Моторошного`.

 
  Спочатку створіть блок `коли я починаю як клон`{.blockcontrol}, де спочатку покажіть фігуру, 
  а потім створіть цикл повторення `завжди`{.blockcontrol}, 
  де фігура рухається зі збільшенням `швидкості`{.blockdata}, а потім чекає невелику мить, наприклад, 0.1 секунди.

- [ ] Потім ми створюємо *нову*, `коли я починаю як клон`{.blockcontrol}, де ми досліджуємо, чи потрапили ми в __сніжок__, чи в `Героя`.

  ```blocks
  коли я починаю як клон
  завжди
      якщо <торкається [Герой v]?> то
          оповістити [кінець v]
          вилучити цей клон
      slutt
	  якщо <торкається [Сніжок v]?> то
          вилучити цей клон
      slutt
  slutt
  ```

  Причина, чому вони мають бути в окремому скрипті, полягає в тому, що перший скрипт трохи чекає між кожним кроком фігурки. 
  Якби ми розмістили ці блоки `якщо`{.blockcontrol} в цьому скрипті, ми б лише перевіряли, чи не влучив у __Моторошного__ сніжок у проміжку між очікуваннями. 
  Створивши окремий скрипт, ми перевіряємо це постійно.

  ## Тестування проєкту {.flag}

__Натисніть на зелений прапорець.__

- [ ] Чи з'являються якісь моторошні? Вони йдуть з обох боків? Вони прямують до середини?

- [ ] Що відбувається, коли в `Моторошного` потрапляє __Сніжок__? Можливо, ви могли б додати відповідний звуковий ефект
      і анімацію перед видаленням клону? Ми також бачимо, що сніжок продовжує летіти після того, як влучив у `Моторошного`. 
	  Спробуйте змінити скрипт __Сніжок__ так, щоб сніжок також зникав.

- [ ] Що відбувається, коли `Моторошний` влучає в `Героя`?

# Крок 4: Підрахуйте очки та завершіть гру {.activity}

*Тепер, коли ми майже закінчили гру, нам також потрібні очки!*

## Контрольний список {.check}

- [ ] Рахувати очки досить просто. Спочатку створіть змінну під назвою `Очки`{.blockdata} та застосуйте її до всіх фігур. 
      Нехай змінна також з'явиться на сцені, щоб ми могли бачити, скільки очок ми отримали.

- [ ] Переконайтеся, що значення `Очки`{.blockdata} встановлено на 0 під час надсилання повідомлення `Старт`,
       наприклад, зі скриптом на сцені.

- [ ] Змінюйте значення `Очки`{.blockdata} на 1 коли в `Моторошного` влучає сніжок.



Раніше ми створили повідомлення `кінець`, яке надсилається, коли `Героя` захоплює `Моторошний`. Тепер ми використаємо його для завершення гри. 
Але спочатку давайте створимо меню і фон, який повідомить нам про те, що ми програли.

- [ ] Клацніть `Сцена` праворуч від `Фігури` і перейдіть на вкладку `Тло`. Створіть дві копії тла і назвіть їх відповідно `Меню` і `Кінець`.

  На тлі `Меню` ви можете створити гарний заголовок. Також `Натисніть "S", щоб почати`.

  На тлі `Кінець` ви можете написати відповідне повідомлення про завершення гри. Також можна написати `Натисніть "S",, щоб продовжити гру.`

- [ ]  Тепер трохи змінимо скрипт на сцені. По-перше, ми показуватимемо меню лише тоді, коли натиснемо зелений прапорець:

  ```blocks
  коли @greenFlag натиснуто
  змінити тло на [Меню v]
  ```

Тоді ми почнемо гру, коли натиснемо `S`:

  ```blocks
  коли клавішу [s v] натиснуто
  опопвістити [Страт v]
  ```

 Також переконайтеся, що ви переключилися на фон `Гра`, коли отримали повідомлення `Старт`, і на тло `Кінець`, коли отримано повідомлення `Кінець`.

- [ ] Нарешті, нам потрібно переконатися, що гра дійсно закінчується після надсилання повідомлення про `Кінець`. 
      Додайте скрипти `вилучити цей клон`{.blockcontrol} на __Сніжок__ та `Моторошний`, а також скрипти для приховування `Героя`, 
	  коли отримано повідомлення `Кінець`.

## Тестування проєкту {.flag}

__Натисніть на зелений прапор.__

- [ ] Чи працює програма? Чи запускається гра при натисканні `S`? Чи закінчується гра, коли `Героя` захоплено? 
     Чи з'являються правильні заставки, коли вони мають з'являтися?

- [ ] Не соромтеся додавати звукові ефекти та прості анімації, де це доречно.

# Крок 5: Великі погані хлопці {.activity}

*На останок зробімо так, щоб чим довше ми грали, тим складніше ставала гра*

- [ ] Спочатку ми вводимо нову змінну `Рівень`{.blockdata}, яка застосовуватиметься до всіх фігур. 
     Це контролює, наскільки складною має бути гра. Будь ласка, залиште це видимим.

- [ ] Ми розраховуємо рівень на основі `очків`{.blockdata}. Розширте свій скрипт, який отримує повідомлення `Старт` на сцені, за допомогою наступного циклу:

  ```blocks
  завжди
      надати [Рівень v] значення ((1) + ([менше ціле v] з ((Очки) / (5))))
  slutt
  ```

  Таким чином, ми говоримо, що `Рівень`{.blockdata} повинен зростати за кожні п'ять прогнаних `Моторошних`.

- [ ] Тепер ми можемо використовувати `Рівень`{.blockdata}, щоб зробити __Моторошних__ злішими. Наприклад, вони можуть ставати більшими, рухатися швидше,
      і, можливо, їм потрібно більше сніжок, перш ніж вони зникнуть.
 
     Створіть кілька нових змінних, які застосовуються до цієї фігури: `Зло`{.blockdata} та `Життя`{.blockdata}. `Зло`{.blockdata} розповість щось про те, 
	 наскільки великий і поганий окремий __Моторошний__. Якщо дозволити цьому значенню бути числом від 1 до `Рівень`{.blockdata}, 
	 гра стає складнішою зі збільшенням `Рівень`{.blockdata}. Наприклад, ви можете додати ці блоки до основного скрипта `Моторошного`:

  ```blocks
  коли я починаю як клон
  надати [Погано v] значення (випадкове від (1) до (Рівень))
  надати [Життя v] значення (Зло)
  змінити [Швидкість v] на (Зло)
  змінити ефект [колір v] на ((10) * (Зло))
  змінити розмір на ((5) * (Зло))
  показати
  завжди
      перемістити на (швидкість) кроків
	  наступний образ
      чекати (0.1) секунд
  slutt
  ```

- [ ] Щоб `Моторошний` міг витримувати більше сніжок, нам також потрібно трохи змінити те, що відбувається, коли його вражають. 
     Замість того, щоб просто видалити клон, ми змінимо `Життя`{.blockdata} на -1, а потім нарахуємо очки та видалимо клон, 
	 лише якщо `Життя`{.blockdata} дорівнює 0.

- [ ] Можливо, нам варто давати більше очок за проганяння злих __Моторошних__? 
      Ви робите це, обмінюючи `Очки`{.blockdata} на `Зло`{.blockdata}, коли `Моторошного` проганяють.

- [ ] Якщо ми отримуємо більше одного очка за кожного `Моторошного`, нам також слід змінити спосіб обчислення `Рівня`{.blockdata}. 
      Інакше гра дуже швидко стане дуже складною. Наприклад, можна скористатися таким розрахунком:

  ```blocks
  завжди
      надати [Рівень v] значення ((1) + ([sqrt v] з ((Очки) / (3)))))
  slutt
  ```

  Тоді ми все одно підвищуватимемо рівень приблизно за кожного п'ятого Моторошного, якого проганяють.

## Тестування проєкту {.flag}

__Натисніть на зелений прапор.__

- [ ] Чи стає гра складнішою з часом? Спробуйте змінити різні змінні та налаштування, які ми створили, щоб зробити гру складнішою.

- [ ] Чи маєте ви ще якісь ідеї, як зробити гру ще цікавішою? Спробуйте їх!

